(()=>{var a="https://webetu.iutnc.univ-lorraine.fr/www/canals5/phox/api",c="https://webetu.iutnc.univ-lorraine.fr";function l(t){return new Promise((e,o)=>{fetch(a+"/photos/"+t).then(n=>{if(!n.ok)throw new Error("Erreur lors de la requ\xEAte");return n.json()}).then(n=>{e(n)}).catch(n=>{o(n)})})}function u(t){let e=' <img src="'+c+t.url.href+'">';return e+="<h4>"+t.titre+"</h4>",e+=" <p>"+t.descr+"</p>",e+="  <p>"+t.type+", "+t.width+" , "+t.height+"</p>",e}function s(t){return' <h4 id="la_categorie">categorie : '+t.nom+"</h4>"}function p(t){console.log(t.comments.size);let e=" <h4>commentaires : </h4>";return e+='  <ul id="les_commentaires">',t.comments.forEach(o=>{e+="    <li>pseudo : "+o.pseudo+" : "+o.content+"</li>"}),e+="   </ul>",e}function h(t){return' <img src="'+c+t.url.href+'">'}function v(t){l(t).then(e=>{let o=document.getElementById("gallery_container"),n=document.createElement("div");n.innerHTML=h(e.photo);let r=document.getElementsByClassName("picture");for(let i=0;i<r.length;i++)r[i].remove();n.classList.add("picture"),o.parentNode.appendChild(n)}).catch(e=>{console.error(e)})}function m(t){l(t).then(e=>{let o=document.createElement("div");o.innerHTML=u(e.photo);let n=document.getElementById("la_photo");n.innerHTML="",n.appendChild(o),d(e).then(r=>{let i=document.createElement("div");i.innerHTML=s(r.categorie),n.appendChild(i)}),f(e).then(r=>{console.log(r);let i=document.createElement("div");i.innerHTML=p(r),n.appendChild(i)})}).catch(e=>{console.error(e)})}function d(t){return new Promise((e,o)=>{let n=c+t.links.categorie.href;fetch(n).then(r=>{if(!r.ok)throw new Error("Erreur lors de la requ\xEAte");return r.json()}).then(r=>{e(r)}).catch(r=>{o(r)})})}function f(t){return new Promise((e,o)=>{let n=c+t.links.comments.href;fetch(n).then(r=>{if(!r.ok)throw new Error("Erreur lors de la requ\xEAte");return r.json()}).then(r=>{e(r)}).catch(r=>{o(r)})})}m(105);})();
